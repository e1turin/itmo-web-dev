<!--<?xml version="1.0" encoding="UTF-8"?>-->
<!--<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"-->
<!--        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
</h:head>
<f:view>

    <h:body>

        <header>
            <h:outputLabel value="Main page"/>
        </header>

        <div class="main">
            <div class="area-container">
                <canvas id="area" width="600" height="600" style="border: solid 2px">Turn on canvas in your browser
                </canvas>
            </div>

            <div class="form-container">
                <h:form>
                    <!-- X INPUT FIELD -->
                    <div class="input-container">
                        <h:outputLabel>X:</h:outputLabel>
                        <h:panelGrid columns="1" style="margin-bottom: 10px">
                            <p:inputNumber id="x_param" value="#{userAttemptBean.XParam}" minValue="-5"
                                           maxValue="5" emptyValue="zero" decimalPlaces="3" required="true"/>
                            <p:slider for="x_param" minValue="-5.0" maxValue="5.0" step="0.001"/>
                        </h:panelGrid>
                    </div>

                    <!-- Y INPUT FIELD -->
                    <div class="input-container">
                        <h:outputLabel>Y:</h:outputLabel>
                        <h:panelGrid columns="1" style="margin-bottom: 10px">
                            <p:inputNumber id="y_param" value="#{userAttemptBean.YParam}" minValue="-3"
                                           maxValue="3" emptyValue="zero" decimalPlaces="3" required="true"/>
                        </h:panelGrid>
                    </div>

                    <!-- R INPUT FIELD -->
                    <div class="input-container">
                        <h:outputLabel>R:</h:outputLabel>
                        <h:panelGrid columns="1" style="margin-bottom: 10px">
                            <!--<p:spinner id="r_param" value="#{userAttemptBean.RParam}" widgetVar="r_param"-->
                            <!--           onchange="on_r_change(e)"-->
                            <!--           min="1" max="5" buttons="horizontal-after" required="true"/>-->
                            <p:selectOneMenu id="r_param" value="#{userAttemptBean.RParam}" dir="rtl"
                                             onchange="set_R(this.value)">
                                <f:selectItem itemLabel="1️⃣" itemValue="1"/>
                                <f:selectItem itemLabel="2️⃣" itemValue="2"/>
                                <f:selectItem itemLabel="3️⃣" itemValue="3"/>
                                <f:selectItem itemLabel="4️⃣" itemValue="4"/>
                                <f:selectItem itemLabel="5️⃣" itemValue="5"/>
                            </p:selectOneMenu>
                        </h:panelGrid>
                    </div>

                    <!-- PRIMEFACES SUBMIT BUTTON (already has ajax) -->
                    <p:commandButton value="Выбрать точку" type="submit"
                                     actionListener="#{userAttemptBean.addAttempt()}"
                                     update="@form results-table"/>

                    <!-- CLEAN BUTTON (already has ajax) -->
                    <p:commandButton value="Очистить предыдущие попытки" type="submit"
                                     actionListener="#{userAttemptBean.deleteAttempts()}"
                                     update="@form results-table"/>
                </h:form>
            </div>
        </div>

        <h:dataTable id="results-table" value="${userAttemptBean.attempts}" var="attempt">
            <!--styleClass="history_table"-->
            <!--headerClass="history_head"-->
            <!--rowClasses="order-table-odd-row,order-table-even-row"-->
            <h:column>
                <f:facet name="header">X</f:facet>
                ${attempt.x}
            </h:column>
            <h:column>
                <f:facet name="header">Y</f:facet>
                ${attempt.y}
            </h:column>
            <h:column>
                <f:facet name="header">R</f:facet>
                ${attempt.r}
            </h:column>
            <h:column>
                <f:facet name="header">Попадание</f:facet>
                ${attempt.insideArea ? "✅" : "❌"}
            </h:column>
            <h:column>
                <f:facet name="header">Время запроса</f:facet>
                ${attempt.currentTime}
            </h:column>
            <h:column>
                <f:facet name="header">Время выполнения</f:facet>
                ${attempt.procTime}
            </h:column>
        </h:dataTable>

        <br/>

        <footer>
            <h:button outcome="start" value="На начальную страницу"/>
        </footer>
    </h:body>
    <h:inputText id="all_attempts_json" value="#{userAttemptBean.attemptsAsJson}" style="display:none"/>
    <h:form id="graph_input">
        <h:inputHidden id="graph_input_x" value="#{userGraphAttemptBean.XParam}"/>
        <h:inputHidden id="graph_input_y" value="#{userGraphAttemptBean.YParam}"/>
        <h:inputHidden id="graph_input_r" value="#{userGraphAttemptBean.RParam}"/>
        <p:commandButton value="--graph_input_submit_btn--" id="graph_input_submit_btn"
                         actionListener="#{userGraphAttemptBean.addAttempt()}" onsuccess="on_update()"
                         update="@form results-table" style="display: none">
            <!--            <f:ajax event="action" execute="@form"  render="results-table all_attempts_jsom" onevent="btnOKhandler"/>-->
        </p:commandButton>
    </h:form>
</f:view>
<h:outputScript library="js" name="script.js"/>
</html>
